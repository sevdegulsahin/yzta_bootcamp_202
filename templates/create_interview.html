{% extends "base.html" %}

{% block title %}Yeni Mülakat Oluştur - Interviewly{% endblock %}

{% block content %}

<body data-page-id="create-interview">
    <div class="create-interview-page">
        <div class="container">
            <!-- Page Data for JS -->
            <div id="page-data" data-selected-type="{{ selected_interview_type or '' }}"
                data-selected-mode="{{ selected_mode or '' }}" data-categories="{{ categories|tojson|safe }}"
                style="display: none;">
            </div>

            <!-- Header Section -->
            <div class="create-header" data-aos="fade-up">
                <h1 class="create-title">Yeni Mülakat Oluşturun</h1>
                <p class="create-subtitle">Hangi tür mülakat yapmak istediğinizi seçin ve başlayın</p>
            </div>

            {% if error %}
            <div class="alert alert-error" data-aos="fade-up">
                <i class="fas fa-exclamation-circle"></i>
                <span>{{ error }}</span>
            </div>
            {% endif %}

            <!-- Interview Type Selection -->
            <div class="interview-types-grid" data-aos="fade-up" data-aos-delay="100">
                <div class="type-card" data-type="assistant">
                    <div class="type-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3>AI Asistan ile Mülakat</h3>
                    <p>Yapay zeka destekli gerçek zamanlı mülakat deneyimi</p>
                    <ul class="type-features">
                        <li><i class="fas fa-check"></i> Doğal konuşma akışı</li>
                        <li><i class="fas fa-check"></i> Anında geri bildirim</li>
                        <li><i class="fas fa-check"></i> Kişiselleştirilmiş sorular</li>
                    </ul>
                    <div class="type-badge">Popüler</div>
                </div>

                <div class="type-card" data-type="written_test">
                    <div class="type-icon">
                        <i class="fas fa-edit"></i>
                    </div>
                    <h3>Yazılı Mülakat</h3>
                    <p>Klasik soru-cevap formatında yazılı mülakat</p>
                    <ul class="type-features">
                        <li><i class="fas fa-check"></i> Detaylı analiz</li>
                        <li><i class="fas fa-check"></i> Zaman sınırlı</li>
                        <li><i class="fas fa-check"></i> Kapsamlı rapor</li>
                    </ul>
                </div>
            </div>

            <!-- Configuration Form -->
            <form method="POST" class="config-form" id="interviewForm" data-aos="fade-up" data-aos-delay="200">
                <input type="hidden" name="interview_type" id="interview_type"
                    value="{{ selected_interview_type or '' }}">

                <div class="config-section" id="mode-section" style="display: none;">
                    <h3 class="section-title">
                        <i class="fas fa-cog"></i>
                        Mülakat Ayarları
                    </h3>

                    <div class="config-grid">
                        <div class="config-item">
                            <label for="mode_choice" class="config-label">
                                <i class="fas fa-layer-group"></i>
                                Mülakat Modu
                            </label>
                            <select id="mode_choice" name="mode_choice" class="config-select" required>
                                <option value="" disabled {% if not selected_mode %}selected{% endif %}>Mod seçin
                                </option>
                                <option value="general" {% if selected_mode=='general' %}selected{% endif %}>
                                    Genel Yetenek
                                </option>
                                <option value="technical" {% if selected_mode=='technical' %}selected{% endif %}>
                                    Teknik
                                </option>
                            </select>
                        </div>

                        <div class="config-item" id="technical-area-item" style="display: none;">
                            <label for="technical_area" class="config-label">
                                <i class="fas fa-tags"></i>
                                Teknik Alan
                            </label>
                            <select id="technical_area" name="technical_area" class="config-select">
                                <option value="" disabled {% if not selected_technical_area %}selected{% endif %}>Alan
                                    seçin</option>
                                {% for cat in categories %}
                                <option value="{{ cat }}" {% if selected_technical_area==cat %}selected{% endif %}>
                                    {{ cat|capitalize|replace('_', ' ') }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="config-item">
                            <label for="difficulty" class="config-label">
                                <i class="fas fa-chart-line"></i>
                                Zorluk Seviyesi
                            </label>
                            <select id="difficulty" name="difficulty" class="config-select">
                                <option value="beginner">Başlangıç</option>
                                <option value="intermediate" selected>Orta</option>
                                <option value="advanced">İleri</option>
                            </select>
                        </div>

                        <div class="config-item">
                            <label for="duration" class="config-label">
                                <i class="fas fa-clock"></i>
                                Süre (Dakika)
                            </label>
                            <select id="duration" name="duration" class="config-select">
                                <option value="15">15 dakika</option>
                                <option value="30" selected>30 dakika</option>
                                <option value="45">45 dakika</option>
                                <option value="60">60 dakika</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Summary Section -->
                <div class="summary-section" id="summary-section" style="display: none;" data-aos="fade-up"
                    data-aos-delay="300">
                    <h3 class="section-title">
                        <i class="fas fa-clipboard-check"></i>
                        Mülakat Özeti
                    </h3>
                    <div class="summary-card">
                        <div class="summary-item">
                            <span class="summary-label">Tür:</span>
                            <span class="summary-value" id="summary-type">-</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Mod:</span>
                            <span class="summary-value" id="summary-mode">-</span>
                        </div>
                        <div class="summary-item" id="summary-area-item" style="display: none;">
                            <span class="summary-label">Alan:</span>
                            <span class="summary-value" id="summary-area">-</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Zorluk:</span>
                            <span class="summary-value" id="summary-difficulty">-</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-label">Süre:</span>
                            <span class="summary-value" id="summary-duration">-</span>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons" data-aos="fade-up" data-aos-delay="400">
                    <button type="button" class="btn btn-secondary">
                        <i class="fas fa-undo"></i>
                        Sıfırla
                    </button>
                    <button type="submit" class="btn btn-primary" id="startButton" disabled>
                        <i class="fas fa-play"></i>
                        Mülakatı Başlat
                    </button>
                </div>
            </form>

            <!-- Quick Start Options -->
            <div class="quick-start-section" data-aos="fade-up" data-aos-delay="500">
                <h3 class="section-title">
                    <i class="fas fa-bolt"></i>
                    Hızlı Başlangıç
                </h3>
                <div class="quick-start-grid">
                    <button class="quick-start-btn" data-type="assistant" data-mode="general">
                        <i class="fas fa-robot"></i>
                        <span>Genel AI Mülakat</span>
                    </button>
                    <button class="quick-start-btn" data-type="assistant" data-mode="technical" data-area="frontend">
                        <i class="fas fa-code"></i>
                        <span>Frontend Mülakat</span>
                    </button>
                    <button class="quick-start-btn" data-type="assistant" data-mode="technical" data-area="backend">
                        <i class="fas fa-server"></i>
                        <span>Backend Mülakat</span>
                    </button>
                    <button class="quick-start-btn" data-type="written_test" data-mode="technical"
                        data-area="data_science">
                        <i class="fas fa-chart-bar"></i>
                        <span>Data Science Test</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
{% endblock %}

{% block scripts %}{% endblock %}