{% extends "base.html" %}

{% block title %}{{ category | capitalize }} Test Sorusu #{{ question_num }}{% endblock %}

{% block content %}

<body data-page-id="written-test">
  <div class="written-test-page">
    <div class="content-container" data-aos="fade-up">
      <div class="question-meta">Soru {{ question_num }} / {{ total_questions }} | Kategori: {{ category | capitalize if
        category else 'Genel Yetenek' }} | Tür: {{ question_type | capitalize }}</div>
      <div class="question-text">{{ question_text | safe }}</div>

      <form action="{{ url_for('interview.submit_written_answer') }}" method="post">
        <input type="hidden" name="question_id" value="{{ session.get('current_question_id') }}">
        <input type="hidden" name="question_type" value="{{ question_type }}">
        <input type="hidden" name="category" value="{{ category }}">
        <input type="hidden" name="question_num" value="{{ question_num }}">
        <input type="hidden" name="total_questions" value="{{ total_questions }}">

        {% if question_type == 'open_ended' %}
        <textarea id="user_answer" name="user_answer" class="form-control" placeholder="Cevabınızı buraya yazın..."
          rows="6" required></textarea>
        {% elif question_type == 'true_false' %}
        <div class="options-container">
          <input type="radio" id="option_true" name="user_answer" value="True" required>
          <label for="option_true">Doğru</label>

          <input type="radio" id="option_false" name="user_answer" value="False">
          <label for="option_false">Yanlış</label>
        </div>
        {% elif question_type == 'multiple_choice' %}
        <div class="options-container">
          {% set options = parsed_data.get('options', {}) %}
          {% for key, value in options.items() %}
          <input type="radio" id="option_{{ key }}" name="user_answer" value="{{ key }}" required>
          <label for="option_{{ key }}">{{ key }}) {{ value }}</label>
          {% endfor %}
        </div>
        {% else %}
        <p class="alert alert-error">Bilinmeyen soru türü: {{ question_type }}</p>
        {% endif %}

        <button type="submit" class="btn btn-primary" style="margin-top: 1rem; width: 100%;">Cevabı Gönder</button>
      </form>

      <div class="nav-links">
        <a href="{{ url_for('interview.create_interview') }}" class="btn btn-secondary">Yeni Test Oluştur</a>
      </div>
    </div>
  </div>
</body>
{% endblock %}