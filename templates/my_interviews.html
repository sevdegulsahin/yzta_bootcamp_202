{% extends "base.html" %}
{% block title %}Geçmiş Mülakatlarım - Interviewly{% endblock %}

{% block content %}
<div class="my-interviews-page">
    <div class="container">
        <!-- Header Section -->
        <div class="page-header" data-aos="fade-up">
            <div class="header-content">
                <div class="header-info">
                    <h1 class="page-title">
                        <i class="fas fa-history"></i>
                        Geçmiş Mülakatlarım
                    </h1>
                    <p class="page-subtitle">Tamamladığınız mülakatları görüntüleyin ve performansınızı analiz edin</p>
                </div>
                <div class="header-stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <div class="stat-info">
                            <span class="stat-value">{{ interviews|length if interviews else 0 }}</span>
                            <span class="stat-label">Toplam Mülakat</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interviews List Grid -->
        {% if interviews %}
        <div class="interviews-grid" data-aos="fade-up" data-aos-delay="200">
            {% for interview in interviews %}
            <a href="{{ url_for('interview.interview_details', question_id=interview.id) }}" class="interview-card"
                data-interview-id="{{ interview.id }}" data-category="{{ interview.category or 'general' }}"
                data-aos="fade-up" data-aos-delay="{{ loop.index * 50 }}">
                <div class="card-header">
                    <div class="interview-meta">
                        <div class="interview-number">
                            <span class="number">#{{ loop.index }}</span>
                        </div>
                        <div class="interview-info">
                            <h3 class="interview-title">
                                {{ interview.category | capitalize if interview.category else 'Genel' }} Mülakatı
                            </h3>
                            <div class="interview-details">
                                <span class="detail-item">
                                    <i class="fas fa-calendar"></i>
                                    {{ interview.created_at.split("T")[0] }}
                                </span>
                                <span class="detail-item">
                                    <i class="fas fa-tag"></i>
                                    {{ interview.question_type | capitalize if interview.question_type else 'Bilinmiyor'
                                    }}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="interview-actions">
                        <div class="interview-status">
                            {% if interview.answers %}
                            {% set last_answer = interview.answers[-1] %}
                            {% if last_answer.is_correct == 1 or last_answer.is_correct == 1.0 %}
                            <span class="status-badge completed">
                                <i class="fas fa-check-circle"></i>
                                Doğru
                            </span>
                            {% else %}
                            <span class="status-badge pending" style="background:rgba(239,68,68,0.1);color:#ef4444;">
                                <i class="fas fa-times-circle"></i>
                                Yanlış
                            </span>
                            {% endif %}
                            {% else %}
                            <span class="status-badge pending">
                                <i class="fas fa-exclamation-triangle"></i>
                                Boş
                            </span>
                            {% endif %}
                        </div>
                        <button class="btn-delete-interview" data-interview-id="{{ interview.id }}"
                            title="Bu mülakatı sil">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Empty State -->
        <div class="empty-state-container" {% if interviews %}style="display: none;" {% endif %} data-aos="fade-up">
            <div class="empty-state">
                <div class="empty-icon">
                    <i class="fas fa-clipboard-list"></i>
                </div>
                <h3>Henüz Mülakat Yok</h3>
                <p>İlk mülakatınızı başlatın ve deneyiminizi geliştirin</p>
                <a href="{{ url_for('interview.create_interview') }}" class="btn btn-primary" style="margin-top: 1rem;">
                    <i class="fas fa-plus"></i>
                    İlk Mülakatı Başlat
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock %}
